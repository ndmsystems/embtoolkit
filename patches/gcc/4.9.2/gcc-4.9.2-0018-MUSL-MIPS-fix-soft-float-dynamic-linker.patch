From 6f5d6320c1d34c069cbf32ddc631191ab9163493 Mon Sep 17 00:00:00 2001
From: Abdoulaye Walsimou Gaye <awg@embtoolkit.org>
Date: Sun, 2 Mar 2014 13:48:21 +0100
Subject: [PATCH 18/19] [MUSL]MIPS: fix soft float dynamic linker

Signed-off-by: Abdoulaye Walsimou Gaye <awg@embtoolkit.org>
---
 gcc/config/mips/linux.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/gcc/config/mips/linux.h b/gcc/config/mips/linux.h
index 0d5e93f..3a75197 100644
--- a/gcc/config/mips/linux.h
+++ b/gcc/config/mips/linux.h
@@ -25,9 +25,10 @@ along with GCC; see the file COPYING3.  If not see
   "%{mnan=2008:/lib/ld-uClibc-mipsn8.so.0;:/lib/ld-uClibc.so.0}"
 
 #undef MUSL_DYNAMIC_LINKER
+
 #if TARGET_ENDIAN_DEFAULT == 0 /* LE */
 #define MUSL_DYNAMIC_LINKER_E "%{EB:;:el}"
 #else
 #define MUSL_DYNAMIC_LINKER_E "%{EL:el}"
 #endif
-#define MUSL_DYNAMIC_LINKER "/lib/ld-musl-mips" MUSL_DYNAMIC_LINKER_E ".so.1"
+#define MUSL_DYNAMIC_LINKER "/lib/ld-musl-mips" MUSL_DYNAMIC_LINKER_E "%{msoft-float:-sf}.so.1"
-- 
2.0.3

