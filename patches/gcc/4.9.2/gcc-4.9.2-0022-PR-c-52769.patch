From fb74a67707caf4c1c85a049b99452a80680bfb26 Mon Sep 17 00:00:00 2001
From: mpolacek <mpolacek@138bc75d-0d04-0410-961f-82ee72b054a4>
Date: Mon, 3 Nov 2014 12:37:59 +0000
Subject: [PATCH 22/36] 	PR c/52769 	* gcc.dg/pr52769.c: New test.

git-svn-id: svn+ssh://gcc.gnu.org/svn/gcc/branches/gcc-4_9-branch@217037 138bc75d-0d04-0410-961f-82ee72b054a4
---
 gcc/testsuite/ChangeLog        |  5 +++++
 gcc/testsuite/gcc.dg/pr52769.c | 24 ++++++++++++++++++++++++
 2 files changed, 29 insertions(+)
 create mode 100644 gcc/testsuite/gcc.dg/pr52769.c

diff --git a/gcc/testsuite/ChangeLog b/gcc/testsuite/ChangeLog
index 96699338..5669363 100644
--- a/gcc/testsuite/ChangeLog
+++ b/gcc/testsuite/ChangeLog
@@ -1,3 +1,8 @@
+2014-11-03  Marek Polacek  <polacek@redhat.com>
+
+	PR c/52769
+	* gcc.dg/pr52769.c: New test.
+
 2014-10-31  DJ Delorie  <dj@redhat.com>
 
 	* gcc.dg/20141029-1.c: New.
diff --git a/gcc/testsuite/gcc.dg/pr52769.c b/gcc/testsuite/gcc.dg/pr52769.c
new file mode 100644
index 0000000..138cecb
--- /dev/null
+++ b/gcc/testsuite/gcc.dg/pr52769.c
@@ -0,0 +1,24 @@
+/* PR c/52769 */
+/* { dg-do run } */
+/* { dg-options "-O3" } */
+
+typedef struct
+{
+  int should_be_zero;
+  char s[6];
+  int x;
+} foo_t;
+
+int
+main (void)
+{
+  volatile foo_t foo = {
+    .s = "123456",
+    .x = 2
+  };
+
+  if (foo.should_be_zero != 0)
+    __builtin_abort ();
+
+  return 0;
+}
-- 
2.0.3

