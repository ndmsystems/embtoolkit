From 29f81bfba6a42e1eb4ee4e384c7132b6a75d4dc9 Mon Sep 17 00:00:00 2001
From: rth <rth@138bc75d-0d04-0410-961f-82ee72b054a4>
Date: Wed, 18 Jun 2014 14:38:56 +0000
Subject: [PATCH 057/134] PR target/61545

* config/aarch64/aarch64.md (tlsdesc_small): Clobber CC_REGNUM.

git-svn-id: svn+ssh://gcc.gnu.org/svn/gcc/branches/gcc-4_8-branch@211787 138bc75d-0d04-0410-961f-82ee72b054a4
---
 gcc/ChangeLog                 | 5 +++++
 gcc/config/aarch64/aarch64.md | 1 +
 2 files changed, 6 insertions(+)

diff --git a/gcc/ChangeLog b/gcc/ChangeLog
index 98406fe..0652ed5 100644
--- a/gcc/ChangeLog
+++ b/gcc/ChangeLog
@@ -1,3 +1,8 @@
+2014-06-18  Richard Henderson  <rth@redhat.com>
+
+	PR target/61545
+	* config/aarch64/aarch64.md (tlsdesc_small): Clobber CC_REGNUM.
+
 2014-06-17  Nagaraju Mekala <nagaraju.mekala@xilinx.com>
 
 	Revert on gcc-4_8-branch.
diff --git a/gcc/config/aarch64/aarch64.md b/gcc/config/aarch64/aarch64.md
index c5cfedb..c879024 100644
--- a/gcc/config/aarch64/aarch64.md
+++ b/gcc/config/aarch64/aarch64.md
@@ -3292,6 +3292,7 @@
         (unspec:DI [(match_operand:DI 0 "aarch64_valid_symref" "S")]
 		   UNSPEC_TLSDESC))
    (clobber (reg:DI LR_REGNUM))
+   (clobber (reg:CC CC_REGNUM))
    (clobber (match_scratch:DI 1 "=r"))]
   "TARGET_TLS_DESC"
   "adrp\\tx0, %A0\;ldr\\t%1, [x0, #%L0]\;add\\tx0, x0, %L0\;.tlsdesccall\\t%0\;blr\\t%1"
-- 
1.8.5.5

